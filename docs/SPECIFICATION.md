# PhotoMove iOS アプリケーション仕様書

## 1. 概要

PhotoMoveは、古いiPhoneを活用してメインiPhoneのストレージ容量を確保する写真・動画移行アプリです。

### 1.1 ターゲットユーザー
- iPhoneのストレージを節約したい人
- 写真・動画が容量の多くを占めている人
- PCへの移行やiCloudの月額課金を避けたい人

### 1.2 提供価値
- 写真を削除せずに容量確保
- 古いiPhoneの有効活用
- 100%ローカル処理によるプライバシー保護
- 買い切り型（月額課金なし）

## 2. 機能仕様

### 2.1 コア機能

#### 2.1.1 デバイス間通信
- **通信方式**: Bonjourによるサービス発見 + HTTPローカルネットワーク通信
- **アーキテクチャ**: iOSアプリ上でHTTPサーバーを起動
- **セキュリティ**: ローカルネットワーク内のみで通信

#### 2.1.2 写真・動画の移行
- **移行フロー**:
  1. 容量確保可能な量を表示
  2. 移行対象の写真・動画をプレビュー表示
  3. ユーザーが確認後、一括移行実行
  4. 移行完了後、メインiPhoneから削除

#### 2.1.3 写真管理ビュー
- **表示モード**:
  - 手元にある写真
  - 移行済み写真（明確に区別して表示）
- **サムネイル管理**:
  - 移行済み写真の低解像度サムネイルをアプリサンドボックスに保持
  - タップ時に古いiPhoneからフルサイズ画像を取得・表示
- **ダウンロード**:
  - 閲覧とダウンロードは別操作
  - 明示的な操作でのみ写真アプリに保存

#### 2.1.4 検索・フィルター機能
- 日付による絞り込み
- 写真の所在（手元/移行済み）による絞り込み
- その他の検索条件（将来拡張）

### 2.2 ユーザーインターフェース

#### 2.2.1 デザイン原則
- Apple Human Interface Guidelines (HIG) 準拠
- 最新のiOSデザイントレンド（Liquid Glass等）との整合性
- 専門用語を使わない、直感的なUI

#### 2.2.2 画面構成
- 詳細な画面設計は別途検討

## 3. 技術仕様

### 3.1 プラットフォーム
- iOS 15.6以上（iPhone 6s対応のため）
- iPhone専用（iPad非対応）

### 3.2 必要な権限
- 写真ライブラリへのアクセス
- ローカルネットワークの使用

### 3.3 データ管理
- **新しいiPhone側（iOS 17以上）**:
  - 写真のメタデータとサムネイルはSwiftDataで管理
  - 移行済み写真の情報を保持
- **古いiPhone側（iOS 15.6以上）**:
  - 受信した写真を写真アプリに保存
  - 追加のデータ管理は不要

### 3.4 通信仕様
- TLS暗号化によるHTTPS通信
- 自己署名証明書によるセキュア通信

## 4. MVP機能範囲

### 4.1 必須機能
- ストレージ容量の監視と通知
- デバイス発見・接続
- 写真・動画の移行（手動選択）
- 移行済み写真の閲覧
- 基本的な検索・フィルター

### 4.2 将来機能
- スマート移行提案
- 重複写真の検出
- バックグラウンド処理
- 複数デバイス対応

## 5. ユーザー体験の考慮事項

### 5.1 初回セットアップ
- 3ステップ以内で完了
- 技術的な設定は自動化

### 5.2 エラーハンドリング
- 分かりやすいエラーメッセージ
- 自動復旧の仕組み

### 5.3 パフォーマンス
- 大量の写真でも軽快に動作
- プログレッシブローディング