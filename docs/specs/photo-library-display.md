# 写真ライブラリ表示機能 外部仕様書

## 概要

写真ライブラリ表示機能は、デバイスの写真ライブラリに保存されている写真を一覧表示する機能です。ユーザーは写真をグリッド形式で閲覧することができます。

## 画面構成

### 写真一覧画面

#### レイアウト
- **表示形式**: グリッド表示
- **列数**: 5列固定
- **アイテム間隔**: 2ポイント（縦横共通）
- **サムネイル形状**: 正方形（アスペクト比 1:1）
- **画像表示方法**: 画像全体が正方形内に収まるよう拡大・クリップ

#### UI要素
1. **写真サムネイル**
   - 各写真は正方形のサムネイルとして表示
   - 画像は正方形にフィットするようクリップされて表示
   - タップ操作には未対応（現バージョン）

2. **ローディングインジケーター**
   - 初回読み込み時: 画面中央に「読み込み中...」と表示
   - サムネイル読み込み中: 各サムネイル位置にグレーの背景とプログレスインジケーターを表示

3. **空状態表示**
   - 写真が0枚の場合: 画面中央にアイコンと「写真がありません」メッセージを表示

## 機能仕様

### 写真読み込み
1. **初回読み込み**
   - アプリ起動時に自動的に写真ライブラリを読み込み
   - 作成日時の新しい順に表示

2. **権限確認**
   - 写真ライブラリへのアクセス権限を自動確認
   - 権限がない場合は権限要求を実施

3. **サムネイル生成**
   - 各写真のサムネイルは表示時に非同期で生成
   - 200x200ポイントのサイズで生成（内部処理）
   - JPEG形式、圧縮率0.8で保存

### エラーハンドリング

#### エラーダイアログ
以下のエラー発生時にアラートダイアログを表示：

| エラー種別 | 表示メッセージ |
|---------|------------|
| 権限拒否 | 写真ライブラリへのアクセスが拒否されています。設定からアクセスを許可してください。 |
| 写真未検出 | 写真が見つかりません |
| 読み込み失敗 | 写真の読み込みに失敗しました |
| サムネイル生成失敗 | サムネイルの生成に失敗しました |

### パフォーマンス
- **大量写真対応**: 1万枚以上の写真でも安定動作
- **メモリ効率**: LazyVGridによる遅延読み込みでメモリ使用量を最適化
- **非同期処理**: サムネイル生成は非同期で実行し、UIの応答性を維持

## 動作要件

### システム要件
- iOS 15.0以降
- 写真ライブラリへのアクセス権限

### 対応メディア
- **対応形式**: 写真（静止画）のみ
- **ビデオ**: 未対応（現バージョン）

## 制限事項

1. **選択機能**: 写真の選択機能は未実装
2. **詳細表示**: 写真をタップしての詳細表示は未実装
3. **検索・フィルター**: 検索や絞り込み機能は未実装
4. **更新**: プルトゥリフレッシュなどの手動更新は未実装

## ローカライゼーション

以下の言語に対応：
- 日本語（デフォルト）
- 英語

### ローカライズ対象テキスト
- 読み込み中...
- 写真がありません
- エラー
- OK
- 各種エラーメッセージ