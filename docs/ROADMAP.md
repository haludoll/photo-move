# PhotoMove 開発ロードマップ

## 概要

PhotoMoveアプリの開発を段階的に進めるためのロードマップです。各フェーズ完了時に動作確認可能な構成を目指します。

## 前提条件

- **技術検証完了**: Bonjour + HTTP + TLS通信は [reuse-backup](https://github.com/haludoll/reuse-backup) で実証済み
- **アーキテクチャ設計完了**: 5つの境界づけられたコンテキスト + AppFoundation

## Phase 1: 基盤構築

### 目標
動作確認可能な最小限のアプリ基盤を構築

### 実装内容

#### 1.1 DeviceRoleContext
- [ ] デバイス役割（Primary/Storage）の選択画面
- [ ] 役割の永続化（UserDefaults）
- [ ] 役割切り替え機能

#### 1.2 AppFoundation
- [ ] 基本的なアプリ構造とナビゲーション
- [ ] 役割に応じたUI切り替え
- [ ] Primary用とStorage用の基本タブ構成
- [ ] 各コンテキストとの統合基盤

### 完了基準
- 2台のiPhoneでアプリが起動
- 役割選択後、それぞれ異なるUIが表示される
- 役割切り替えが正常に動作する

## Phase 2: コア機能開発

### 目標
基本的な写真管理と通信機能を実装

### 実装内容

#### 2.1 SystemMonitoringContext
- [ ] ストレージ容量の取得・表示
- [ ] Primary: 容量不足検出
- [ ] Storage: 受信可能容量表示

#### 2.2 NetworkConnectionContext
- [ ] reuse-backupの通信コードを参考にした実装
- [ ] Bonjourによるデバイス発見
- [ ] HTTPSサーバーの起動・停止
- [ ] 基本的な接続確認

#### 2.3 MediaLibraryContext
- [ ] PhotoKitを使った写真一覧表示
- [ ] Primary: 写真選択UI
- [ ] Storage: 受信写真一覧（最初は空）

#### 2.4 AssetTransferContext
- [ ] 1枚の写真転送機能（最小実装）
- [ ] Primary: 写真送信
- [ ] Storage: 写真受信・保存

### 完了基準
- 容量情報が正しく表示される
- デバイス間で通信が確立される
- 1枚の写真を手動で転送できる
- 転送された写真がStorage側で確認できる

## Phase 3: 実用化

### 目標
実際に使える機能レベルまで拡張

### 実装内容

#### 3.1 一括転送機能
- [ ] 複数写真の選択・転送
- [ ] 転送進捗の表示
- [ ] エラーハンドリング・リトライ

#### 3.2 リモート閲覧機能
- [ ] 移行済み写真のサムネイル表示
- [ ] タップ時の高解像度表示
- [ ] ダウンロード機能（オプション）

#### 3.3 自動選択ロジック
- [ ] 基本的な移行対象自動判定
- [ ] ユーザー確認UI
- [ ] 除外設定機能

### 完了基準
- 実用的な速度での一括転送
- 移行済み写真の快適な閲覧
- 自動選択による効率的な容量確保

## Phase 4: 仕上げ

### 目標
ユーザー体験の向上と完成度の向上

### 実装内容

#### 4.1 オンボーディング
- [ ] 初回起動時の説明画面
- [ ] 権限リクエスト（写真、ネットワーク）
- [ ] セットアップガイド

#### 4.2 設定・管理機能
- [ ] 通知設定
- [ ] アプリ設定画面
- [ ] ヘルプ・サポート

#### 4.3 パフォーマンス最適化
- [ ] 大量写真への対応
- [ ] メモリ使用量最適化
- [ ] バッテリー効率改善

### 完了基準
- 新規ユーザーがスムーズにセットアップ可能
- 快適な操作性
- 安定動作

## 技術的考慮事項

### 開発方針
- **段階的実装**: 各Phase完了時に動作確認
- **DDD準拠**: 境界づけられたコンテキストの責務を守る
- **テスト駆動**: 主要機能には単体テスト実装

### リスク対応
- **通信安定性**: Phase 2で十分な検証を実施
- **パフォーマンス**: 大量データでの早期テスト
- **ユーザビリティ**: 各Phaseでフィードバック収集

## マイルストーン予定

- **Phase 1完了**: アプリ基盤構築
- **Phase 2完了**: MVP機能実装
- **Phase 3完了**: 実用レベル達成
- **Phase 4完了**: リリース準備完了

---

*このロードマップは開発進行に応じて更新されます*