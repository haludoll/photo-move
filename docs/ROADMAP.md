# PhotoMove 開発ロードマップ

## 概要

PhotoMoveアプリの開発を段階的に進めるためのロードマップです。各フェーズ完了時に動作確認可能な構成を目指します。

## 前提条件

- **技術検証完了**: Bonjour + HTTP + TLS通信は [reuse-backup](https://github.com/haludoll/reuse-backup) で実証済み
- **アーキテクチャ設計完了**: 5つの境界づけられたコンテキスト + AppFoundation
- **設計変更**: DeviceRoleContextは削除され、転送時役割はAssetTransferContextで管理

## Phase 1: 基盤構築

### 目標
動作確認可能な最小限のアプリ基盤を構築

### 実装内容

#### 1.1 AppFoundation
- [ ] 基本的なアプリ構造とナビゲーション
- [ ] メイン画面（「写真を送る」「写真を受け取る」選択）
- [ ] 動的な機能切り替え
- [ ] 各コンテキストとの統合基盤

#### 1.2 AssetTransferContext（転送時役割管理）
- [ ] 転送時の役割（Sender/Receiver）管理
- [ ] 転送セッション中の状態管理
- [ ] 基本的な転送フロー

### 完了基準
- 2台のiPhoneでアプリが起動
- メイン画面で「送る」「受け取る」選択が可能
- 選択に応じて適切な画面が表示される

## Phase 2: コア機能開発

### 目標
基本的な写真管理と通信機能を実装

### 実装内容

#### 2.1 SystemMonitoringContext
- [ ] ストレージ容量の取得・表示
- [ ] 容量不足検出・アラート
- [ ] 容量節約予測機能

#### 2.2 NetworkConnectionContext
- [ ] reuse-backupの通信コードを参考にした実装
- [ ] Bonjourによるデバイス発見
- [ ] HTTPSサーバーの起動・停止
- [ ] 基本的な接続確認

#### 2.3 MediaLibraryContext
- [ ] PhotoKitを使った写真一覧表示
- [ ] 写真選択UI（容量重視の表示）
- [ ] 受信写真の管理

#### 2.4 AssetTransferContext
- [ ] 1枚の写真転送機能（最小実装）
- [ ] Sender: 写真送信機能
- [ ] Receiver: 写真受信・保存機能

### 完了基準
- 容量情報が正しく表示される
- デバイス間で通信が確立される
- 1枚の写真を手動で転送できる
- 転送された写真が受信側で確認できる

## Phase 3: 実用化

### 目標
実際に使える機能レベルまで拡張

### 実装内容

#### 3.1 一括転送機能
- [ ] 複数写真の選択・転送
- [ ] 転送進捗の表示
- [ ] エラーハンドリング・リトライ

#### 3.2 移動履歴機能
- [ ] 移動した写真の履歴表示
- [ ] 代表的なサムネイル保存
- [ ] 容量節約効果の可視化

#### 3.3 自動選択ロジック
- [ ] 基本的な移行対象自動判定
- [ ] ユーザー確認UI
- [ ] 除外設定機能

### 完了基準
- 実用的な速度での一括転送
- 移動履歴の快適な確認
- 自動選択による効率的な容量確保

## Phase 4: 仕上げ

### 目標
ユーザー体験の向上と完成度の向上

### 実装内容

#### 4.1 オンボーディング
- [ ] 初回起動時の説明画面
- [ ] 権限リクエスト（写真、ネットワーク）
- [ ] セットアップガイド

#### 4.2 設定・管理機能
- [ ] 通知設定
- [ ] アプリ設定画面
- [ ] ヘルプ・サポート

#### 4.3 パフォーマンス最適化
- [ ] 大量写真への対応
- [ ] メモリ使用量最適化
- [ ] バッテリー効率改善

### 完了基準
- 新規ユーザーがスムーズにセットアップ可能
- 快適な操作性
- 安定動作

## 技術的考慮事項

### 開発方針
- **段階的実装**: 各Phase完了時に動作確認
- **DDD準拠**: 境界づけられたコンテキストの責務を守る
- **テスト駆動**: 主要機能には単体テスト実装

### リスク対応
- **通信安定性**: Phase 2で十分な検証を実施
- **パフォーマンス**: 大量データでの早期テスト
- **ユーザビリティ**: 各Phaseでフィードバック収集

## マイルストーン予定

- **Phase 1完了**: アプリ基盤構築
- **Phase 2完了**: MVP機能実装
- **Phase 3完了**: 実用レベル達成
- **Phase 4完了**: リリース準備完了

---

*このロードマップは開発進行に応じて更新されます*