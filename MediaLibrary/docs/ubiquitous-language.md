# MediaLibrary - ユビキタス言語定義書

## 概要

MediaLibraryContextにおいて、ドメインエキスパートと開発者が共通して使用する用語を定義します。

## 用語定義

### 基本概念

#### Media (メディア)
- **定義**: デバイスのストレージに保存されている写真または動画ファイル
- **種類**: Photo（写真）、Video（動画）
- **特徴**: 固有の識別子、ファイルパス、メタデータを持つ

#### MediaMetadata (メディアメタデータ)
- **定義**: メディアに関連する情報（撮影日時、場所、サイズ等）
- **含まれる情報**:
  - 撮影日時 (createdAt)
  - ファイルサイズ (fileSize)
  - 解像度 (resolution)
  - 撮影場所 (location) - 位置情報が利用可能な場合
  - ファイル形式 (fileFormat)

#### MediaLibrary (メディアライブラリ)
- **定義**: デバイス内のすべてのメディアを管理・整理する概念的なコレクション
- **機能**: 一覧表示、検索、フィルタリング、選択

### 機能関連

#### MediaFilter (メディアフィルター)
- **定義**: メディアの絞り込み条件を表現するオブジェクト
- **フィルター種類**:
  - 日付範囲フィルター
  - メディア種類フィルター（写真のみ、動画のみ）
  - ファイルサイズフィルター
  - 撮影場所フィルター

#### MediaSelection (メディア選択)
- **定義**: ユーザーが選択したメディアの集合
- **機能**: 単一選択、複数選択、全選択、選択解除
- **用途**: 転送対象の指定、操作対象の指定

#### Thumbnail (サムネイル)
- **定義**: メディアの縮小表示用画像
- **目的**: 一覧表示時のパフォーマンス向上
- **管理**: キャッシュ機能を持つ

### 技術的概念

#### MediaRepository (メディアリポジトリ)
- **定義**: メディアデータへのアクセスを抽象化するインターフェース
- **機能**: CRUD操作、検索、フィルタリング

#### MediaLibraryService (メディアライブラリサービス)
- **定義**: メディアライブラリに関するビジネスロジックを実装するサービス
- **機能**: メディアの管理、選択状態の管理、フィルタリング

#### ThumbnailService (サムネイルサービス)
- **定義**: サムネイルの生成・管理を行うサービス
- **機能**: サムネイル生成、キャッシュ管理

### 状態・属性

#### MediaType (メディアタイプ)
- **定義**: メディアの種類を表す列挙型
- **値**: photo（写真）、video（動画）

#### SelectionState (選択状態)
- **定義**: メディアの選択状態を表す列挙型
- **値**: selected（選択済み）、unselected（未選択）

#### MediaFormat (メディアフォーマット)
- **定義**: メディアファイルの形式
- **写真**: JPEG、PNG、HEIC等
- **動画**: MP4、MOV、AVI等

## 用語の関係性

```
MediaLibrary
├── Media (Photo/Video)
│   ├── MediaMetadata
│   ├── MediaType
│   ├── MediaFormat
│   └── SelectionState
├── MediaFilter
├── MediaSelection
└── Thumbnail
```

## 基本的なビジネスルール（暫定）

> **注意**: 以下のルールは暫定的なものであり、実装時に詳細な挙動を定義していきます。

### メディア管理
- メディアは一意の識別子を持つ
- メディアは作成日時を基準にソートされる

### 選択機能
- 選択は一時的な状態である
- 選択可能な上限数は設定可能

### フィルタリング
- 複数のフィルター条件はAND条件で適用される

### サムネイル
- サムネイルは必要に応じて生成される
- サムネイルはキャッシュされる

## 関連する他のコンテキスト

### AssetTransferContext
- **関係**: MediaSelectionで選択されたメディアを転送対象として提供
- **インターフェース**: 選択されたメディアのリストを転送コンテキストに渡す