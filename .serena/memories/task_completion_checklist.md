# PhotoMove タスク完了時チェックリスト

## コード変更を伴うタスク完了時の必須手順

### 1. コードフォーマット実行
```bash
./Scripts/format.sh
```
- **目的**: Apple公式のswift-formatでコード整形
- **対象**: 全てのSwiftファイル（.swift）
- **設定**: プロジェクトルートの`.swift-format`ファイルに基づく

### 2. テスト実行
```bash
./Scripts/test.sh
```
- **内容**: フォーマット → テスト実行
- **対象**: 全パッケージのテストスイート
- **確認**: テスト結果がすべてパスすること

### 3. ビルド確認
```bash
# パッケージビルド
./Scripts/build.sh

# iOSシミュレータ向けビルド（動作確認用）
xcodebuild -workspace photo-move.xcworkspace -scheme photo-move -destination 'platform=iOS Simulator,name=iPhone 16' build
```
- **目的**: コンパイルエラーがないことを確認
- **対象**: 全パッケージ + メインアプリ

### 4. Git コミット・プッシュ
```bash
git add .
git commit -m "実装内容の簡潔な説明"
git push
```
- **コミットメッセージ**: 日本語で簡潔に変更内容を記述
- **Author情報**: コミットメッセージには含めない
- **頻度**: 各TODOタスク完了時に必ずコミット

## 段階的実装の原則

### Issue取り組み前
- GitHub Issueとそのコメントを全て確認
- 必要な作業をTODOリストに整理

### 実装時
- **一度にすべてを実装しない**
- 段階的に指示を受けて実行
- 各段階は独立して動作確認可能な単位
- レビュー負荷軽減のため小さなコード差分を心がける

### 完了判定
- すべての機能が期待通りに動作
- テストがパス
- ビルドエラーなし
- コードフォーマットが適用済み

## 品質確認チェックポイント

### コード品質
- [ ] CLAUDE.mdのコーディング規約に準拠
- [ ] 適切なMARKコメントで構造化
- [ ] 不要なコメントを排除（自明でないもののみ）
- [ ] DDD設計パターンに従った実装

### テスト
- [ ] 新機能に対応するテストを追加
- [ ] 既存テストが引き続きパス
- [ ] エッジケースを考慮したテスト

### ドキュメント
- [ ] 必要に応じてREADMEやドキュメントを更新
- [ ] API変更時はインターフェース仕様を更新

## エラー対応

### ビルドエラー時
1. エラーメッセージを詳細に確認
2. 依存関係の問題の場合はPackage.resolvedをリセット
3. Xcodeキャッシュクリアを試行

### テスト失敗時
1. 失敗したテストを個別実行して原因特定
2. コードロジックの見直し
3. テスト自体の妥当性確認

### フォーマットエラー時
1. swift-formatのインストール状況確認
2. .swift-format設定ファイルの存在確認
3. 手動でswift-formatを実行してエラー詳細確認